<!DOCTYPE html>
<!-- Note that some of this code, like the math functions, were AI generated. The actual formulas and variables involved were calculated by me. -->
<html lang="en">
<link rel="stylesheet" href="https://virj280.github.io/the-puchi-invasion/Linescript%20webfont%20kit/stylesheet.css" type="text/css" charset="utf-8" />
<head>
<meta charset="UTF-8">
<title>Farlands Calculator</title>
<link rel="icon" href="https://virj280.github.io/farlands/farland-favicon.ico" type="image/x-icon">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- my guy what could you possibly be doing in the source code
well anyway here's the entire lyrics of You Spin Me Round

Spin me right
Spin me round
Spin me right
Spin me round
Spin me right
Spin me round
Spin me right round, baby, right round
If I, I get to know your name
Well, I could trace your private number, baby
All I know is that to me
You look like you're lots of fun
Open up your lovin' arms
I want some, want some
I, I set my sights on you (and no one else will do)
And I, I got to have my way now, baby
All I know is that to me
You look like you're havin' fun
Open up your lovin' arms
Watch out, here I, watch out, here I come
You spin me right round, baby, right round
Like a record, baby, right round, round, round
You spin me right round, baby, right round
Like a record, baby, right round, round, round
I (I), I got to be your friend now, baby
And I (I), would like to move in just a little bit closer
All I know is that to me
You look like you're lots of fun
Open up your lovin' arms
Watch out, here I
Watch out, here, I
Watch out, here I
Watch out, here I come
Spin me right
Spin me round
Spin me right
Spin me round
Spin me right
Spin me round
Spin me right round, baby, right round
You spin me right round, baby, right round
Like a record, baby, right round, round, round
You spin me right round, baby, right round
Like a record, baby, right round, round, round
I want your love
I want your love
All I know is that to me
You look like you're lots of fun
Open up your lovin' arms
Watch out, here I come
You spin me right round, baby, right round
Like a record, baby, right round, round, round
You spin me right round, baby, right round
Like a record, baby, right round, round, round
You spin me right round, baby, right round
Like a record, baby, right round, round, round
You spin me right round, baby, right round
Like a record, baby, right round, round, round
Spin me right
Spin me round
Spin me right
Spin me round
Spin me right
Spin me round
Spin me right round, baby, right round
Spin me right (I, I)
Spin me round (I, I)
Spin me right (I, I)
Spin me round (I, I)
Spin me right (I, I)
Spin me round (I, I)
Spin me right round, baby, right round (I, I, I)
Like a record, baby
You spin me right round, baby, right round
Like a record, baby, right round, round, round
You spin me right round, baby, right round
Like a record, baby, right round, round, round

That was so funny man you should totally be laughing right now -->


<style>
body {
    font-family:Linescript;
    background:#0f0f0f;
    color:#f0f0f0;
    margin:0;
    padding:30px;
}
.container { max-width:1200px; margin:auto; }
h1,h2 { color:#4fc3f7; }
.section {
    background:#1a1a1a;
    padding:20px;
    margin:20px 0;
    border-radius:10px;
}
.formula {
    background:#111;
    padding:12px;
    font-family: monospace;
    border-radius:6px;
}

.controls { margin-top:15px; font-family:Linescript; }
.input[type=range]{ width:60%; }
.input[type=number]{ width:100px; padding:5px; }
.select{ padding:5px; }
.canvas { background:white; border-radius:8px; }
.tp-box { margin-top:15px; }

button{
    padding:8px 12px;
    margin:5px;
    border:none;
    border-radius:6px;
    cursor:pointer;
    font-family:Linescript;
    
}
.edge{background:#2b8cff;color:white;}
.corner{background:#00b894;color:white;}
input.command{
    width:80%;
    padding:8px;
    border-radius:6px;
    border:none;
    font-family:Linescript;
}
.warning{color:#ff5252;font-weight:bold;}
.good{color:#00e676;font-weight:bold;}
a{color:#81d4fa;}
a:hover {
    color: #355e32;
    background-color: transparent;
    text-decoration: none;
}
.copy-btn {
    background-color: #ff5252;
    color: white;
    font-size: 0.85em;
    padding: 6px 10px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    margin-left: 5px;
    font-family:Linescript;
}
.copy-btn:hover { background-color: #bbff00; }
.button:hover { background-color: #bbff00; }
.edge:hover { background-color: #bbff00; }
.corner:hover { background-color: #bbff00; }
</style>
</head>

<body>
<div class="container">

<h1>Farlands Calculator & Formula Guide</h1>
<p>This is a calculator that determines where the farlands spawn based off the terrain coordinate scale and how it is modified. The formula is below (it's labeled "Formula" in big text so it's kinda hard to miss).<br>Basically, with this tool you can spawn the farlands at any distance you want.<br>Enjoy!<br>(Also please don't look at my crappy source code you don't need to see what's in there)</p>
<p>View the GitHub repo <a href="https://github.com/Virj280/farlands">here</a>.<br>
If you have any questions/concerns, please contact 
<a href="https://mail.google.com/mail/?view=cm&fs=1&tf=1&to=masterofmaybe@gmail.com">
masterofmaybe@gmail.com</a>.</p>
<p><a href="https://www.desmos.com/calculator/qvwnx0ph8f">
Original Desmos graph</a></p>
<p>Required mods (if you want to use 32-bit distances): <a href="https://modrinth.com/mod/architectury-api">Architectury</a>, <a href="https://modrinth.com/mod/fabric-api">Fabric api</a> (all mods here use fabric), <a href="https://modrinth.com/mod/border-remover/versions">Border Remover</a>, and <a href="https://modrinth.com/mod/cloth-config">Cloth Config</a>.</p>

<div class="section">
<h2>Formula</h2>
<div class="formula">d = 2^(n-1) / (171.103 × 80^b × a)</div>
<p>b ≤ 0 (integer only)<br>b = 0 → Farlands<br>b = -1 → Farther Lands</p>
<p>a > 0 (decimal allowed)<br>Lower a → farther generation<br>Higher a → closer generation</p>
<p>t is the terrain coordinate scale (value to input ingame for horizontal/vertical t)</p>
<div class="formula">t = 684.412a</div>
<p>Higher t value → jagged terrain (squeezing noise map)<br>Lower t value → flatter terrain (stretching noise map)</p>
</div>

<div class="section">
<h2>Calculator</h2>

<div class="controls">
<label>a (noise scale modifier):</label>
<input type="number" id="aInput" min="0.000000001" step="any" value="1" class="controls">
</div>

<div class="controls">
<label>b (Farlands tier):</label>
<input type="range" id="bSlider" min="-1" max="0" step="1" value="0">
<span id="bVal">0</span>
</div>

<div class="controls">
<label>n:</label>
<select id="nSelect" class="controls">
<option value="32">32-bit (old/modded)</option>
<option value="64">64-bit (modern)</option>
</select>
</div>

<div id="results"></div>
<div id="verticalCheck"></div>

<!-- Terrain Scale -->
<div class="controls">
<label>Terrain Scale (t):</label><br>
<input class="command" id="tValue" readonly>
<button class="copy-btn" onclick="copyCommand('tValue')">Copy</button>
</div>

<div class="tp-box">
<h3>/Tp Generator</h3>

<p>Edge Farlands</p>
<button class="edge" onclick="generateEdge()">Edge TP</button>
<button class="corner" onclick="generateCorner()">Corner TP</button>
<input class="command" id="tpHorizontal" readonly>
<button class="copy-btn" onclick="copyCommand('tpHorizontal')">Copy</button>

<br><br>

<p>Sky Farlands</p>
<button class="edge" onclick="generateSky()">Sky TP</button>
<input class="command" id="tpSky" readonly>
<button class="copy-btn" onclick="copyCommand('tpSky')">Copy</button>

<br><br>

<p>Void Farlands</p>
<button class="edge" onclick="generateVoid()">Void TP</button>
<input class="command" id="tpVoid" readonly>
<button class="copy-btn" onclick="copyCommand('tpVoid')">Copy</button>
</div>

<div class="section">
<h2>Notes</h2>
<p>Default Farlands (a=1, b=0, n=32): ≈ 12,550,824 blocks</p>
<p>64-bit equivalent: ≈ 53.905 quadrillion blocks</p>
<p>1–3 block variation becomes 1–3 billion block variation. In fact, the reason behind this is quite simple. If you take the value 53.905 quadrillion, and only look at the last 7 digits (or 53,905,378), since the farlands generate 12.55 million blocks (8 digit number) in older versions, and subtract 7 from 16 (53.905 * 10^16), you get 9. This leads to 9 extra zeros. Because of this, you end up with a variation of 1-3 billion blocks.</p>
<p>Noise maps break twice as far vertically: Vertical = 2d (represented as v)</p>
<p>Sky Farlands require v < 253<br>
Void Farlands require v < 64</p>
</div>

<div class="section">
<h2>Distance Graph</h2>
<canvas id="graph" height="400"></canvas>
</div>

</div>

<script>
const ctx = document.getElementById("graph").getContext("2d");
const aInput = document.getElementById("aInput");
const bSlider = document.getElementById("bSlider");
const bVal = document.getElementById("bVal");
const nSelect = document.getElementById("nSelect");
const results = document.getElementById("results");
const verticalCheck = document.getElementById("verticalCheck");
const tpHorizontal = document.getElementById("tpHorizontal");
const tpSky = document.getElementById("tpSky");
const tpVoid = document.getElementById("tpVoid");
const tValue = document.getElementById("tValue");

let currentDistance = 0;

function computeDistance(n, a, b) {
    const logNumerator = (n - 1) * Math.log10(2);
    const logDenominator = Math.log10(171.103) + b * Math.log10(80) + Math.log10(a);
    const logResult = logNumerator - logDenominator;
    return Math.pow(10, logResult);
}

function generateCurve(n,a){
    let data=[];
    for(let b=-1; b<=0; b+=0.01){
        data.push({x:b,y:computeDistance(n,a,b)});
    }
    return data;
}

const chart = new Chart(ctx,{
    type:'line',
    data:{
        datasets:[
            {label:"32-bit",borderColor:"red",fill:false,data:generateCurve(32,1)},
            {label:"64-bit",borderColor:"green",fill:false,data:generateCurve(64,1)}
        ]
    },
    options:{
        scales:{
            x:{type:'linear',title:{display:true,text:"b"}},
            y:{type:'logarithmic',title:{display:true,text:"Distance"}}
        }
    }
});

function update(){
    let a = parseFloat(aInput.value);
    const b = parseInt(bSlider.value);
    const n = parseInt(nSelect.value);

    if (isNaN(a) || a <= 0){
        results.innerHTML = "<span class='warning'>Please enter a value greater than 0</span>";
        return;
    }

    bVal.textContent = b;

    const d = computeDistance(n,a,b);
    const vertical = 2*d;
    const t = 684.412*a;

    currentDistance = Math.round(d);

    results.innerHTML=`
        Horizontal Distance: ${currentDistance.toLocaleString()} blocks<br>
        Vertical Distance: ${Math.round(vertical).toLocaleString()} blocks
    `;

    tValue.value = t.toFixed(3);

    let skyCan = vertical < 253;
    let voidCan = vertical < 64;

    verticalCheck.innerHTML = `
        Sky Farlands: ${skyCan ? "<span class='good'>CAN generate</span>" : "<span class='warning'>CANNOT generate</span>"}<br>
        Void Farlands: ${voidCan ? "<span class='good'>CAN generate</span>" : "<span class='warning'>CANNOT generate</span>"}
    `;

    chart.data.datasets[0].data = generateCurve(32,a);
    chart.data.datasets[1].data = generateCurve(64,a);
    chart.update();
}

function generateEdge(){
    tpHorizontal.value = `/tp @p ${currentDistance} ~ ~`;
}

function generateCorner(){
    tpHorizontal.value = `/tp @p ${currentDistance} ~ ${currentDistance}`;
}

function generateSky(){
    let a = parseFloat(aInput.value);
    const b = parseInt(bSlider.value);
    const n = parseInt(nSelect.value);
    const vertical = Math.round(2*computeDistance(n,a,b));

    if(a <= 0){
        tpSky.value = "Error: a must be > 0";
        return;
    }
    if(vertical >= 253){
        tpSky.value = "Cannot generate Sky Farlands: v ≥ 253";
    } else {
        tpSky.value = `/tp @p ~ ${vertical} ~`;
    }
}

function generateVoid(){
    let a = parseFloat(aInput.value);
    const b = parseInt(bSlider.value);
    const n = parseInt(nSelect.value);
    const vertical = Math.round(2*computeDistance(n,a,b));

    if(a <= 0){
        tpVoid.value = "Error: a must be > 0";
        return;
    }
    
    if(vertical >= 64){
        tpVoid.value = "Cannot generate Void Farlands: v ≥ 64";
    } else {
        tpVoid.value = `/tp @p ~ ${vertical} ~`;
    }
}

function copyCommand(elementId){
    const input = document.getElementById(elementId);
    if(input.value){
        navigator.clipboard.writeText(input.value)
            .then(() => {
                input.style.border = "2px solid #00e676";
                setTimeout(() => input.style.border = "", 500);
            })
            .catch(err => alert("Failed to copy: " + err));
    } else {
        alert("No value to copy.");
    }
}

aInput.oninput = update;
bSlider.oninput = update;
nSelect.onchange = update;

update();
</script>

</body>
</html>

